<div class="3colrow">
    <div class="col">
        <h2>CLEARENCE CARD</h2>
        <label>Name:</label><input type="text" name="attr_character_name" />
        <label>Race:</label><input type="text" name="attr_race" />
        <label>Package:</label><input type="text" name="attr_package" />
        <label>Squad:</label><input type="text" name="attr_squad" />
        <label>SCL:</label><input type="number" name="attr_scl" />
    </div>

    <div class="col">
        <img src="https://1drv.ms/u/s!Aqj9T_w0jIRJgeECtLnTY1NUPXblqw?e=VEYUYm" />
    </div>

    <div class="col">
        <h2>RATINGS POINTS</h2>
        <span class="round">
            <label>Body:</label><input type="number" name="attr_body" /><br />
            <label>Brains:</label><input type="number" name="attr_brains" /><br />
            <label>Bravado:</label><input type="number" name="attr_bravado" /><br />
        </span>
        <label>Initiative:</label><input type="number" name="attr_initiative" /><button type="roll" name="roll_initiative" value='&{template:default} {{name=@{character_name}}} {{Initiative=[[{1d10 + @{initiative}} &{tracker}]] }}'></button><br />
        <label>Luck:</label><input type="number" name="attr_luck" /><span>&nbsp;/&nbsp;</span><input type="number" name="attr_luckmax" />
    </div>

</div>
<hr/>

<div class="3colrow">
    <div class="col">

        <h2>STATS</h2>

        <label>STR:</label><input type="number" name='attr_str' />
        <br />
        <label>DEX:</label><input type="number" name='attr_dex' />
        <br />
        <label>KNOW:</label><input type="number" name='attr_know' />
        <br />
        <label>CONC:</label><input type="number" name='attr_conc' />
        <br />
        <label>CHA:</label><input type="number" name='attr_cha' />
        <br />
        <label>COOL:</label><input type="number" name='attr_cool' />
        <hr />
        
        <h2>MOVEMENT</h2>
        <label>Closing:</label><input type="number" name="attr_closing" />
        <br />
        <label>Rushing:</label><input type="number" name="attr_rushing" />
        <br />
        <label>Encum:</label><input type="number" name="attr_encumberance" />
        <hr />
        
    </div>
    
    <div class="col">
        <h2>SKILLS</h2>
        <fieldset class="repeating_skills">
            <input type="text" name="attr_skillname" class="sheet-short" />
            <input type="number" name="attr_skillrank" />
            <select name="attr_statskill" class="sheet-dtype">
                <option value="@{str}">STR</option>
                <option value="@{dex}">DEX</option>
                <option value="@{know}">KNOW</option>
                <option value="@{conc}">CONC</option>
                <option value="@{cha}">CHA</option>
                <option value="@{cool}">COOL</option>
            </select>
            <button type='roll' name='roll_skilltest' value='?{Difficulty|Mundane,0|Simple,4|Challenging,7|Complex,10|Strenuous,13|Insane,16} &{template:default} {{name=@{character_name} - @{skillname}}} {{Success Die=[[{1d10 + @{skillrank} + @{statskill}}>?{Difficulty}]]}} {{Margin Dice=[[{(1+@{skillrank})d10 + @{skillrank} + @{statskill}}>?{Difficulty}]]}}'></button>
        </fieldset>
    </div>

    <div class="col">
        <h2>TRAITS</h2>
        <fieldset class="repeating_traits">
            <input type="text" name="attr_traitname" />
            <label class="simple">Rank</label>
            <input type="number" name="attr_traitrank" />
        </fieldset>
        <hr/>
        <h2>DRUGS</h2>
        <fieldset class="repeating_drugs">
            <input type="text" name="attr_drugname" />
            <label class="simple">Qty</label>
            <input type="number" name="attr_drugrank" />
        </fieldset>
    </div>

</div>

<!-- ---------------------------SHEET WORKERS----------------- -->

<script type="text/worker">

    on("sheet:opened", () => {
        updateInitiative();
    });

    on("change:dex change:conc", () => {
        updateInitiative();
    });

    function updateInitiative() {
        getAttrs(["dex", "conc"], function(values) {
            var tmpDex = parseInt(values.dex);
            var tmpConc = parseInt(values.conc);
            var tmpInit = (tmpDex+tmpConc);
            setAttrs({
                "initiative": tmpInit
            });
        });
    };

</script>